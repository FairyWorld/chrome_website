<head>

</head>

<body>
    <script>
        (async function () {

            window.VideoTogetherEasyShareMemberSite = true;
            const m3u8Url = decodeURIComponent(window.location.hash.substring(1));
            setInterval(() => {
                if (m3u8Url != decodeURIComponent(window.location.hash.substring(1))) {
                    window.location.reload();
                }
            }, 1000)
            let playerHtml = await (await fetch('./superplayer.html?x=' + Date.now())).text();
            // this can be hack, but I think the hack can do nothing in this page
            // SEO AD?
            playerHtml = playerHtml.replace('M3U8_URL', m3u8Url.replace(/'/g, ""));
            console.log(btoa(playerHtml));
            let iframe = document.createElement("iframe");
            iframe.style.display = 'none'
            iframe.src = "data:text/html;base64," + btoa(playerHtml);
            iframe.width = "100%";
            iframe.height = "100%";
            document.body.appendChild(iframe);
            window.addEventListener("message", e => {
                if (e.data == 'hlsVideoReady') {
                    iframe.style.display = "block";
                }
            })
        })()
    </script>
    <style>
        iframe {
            border: none;
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</body>